<template>
    <lightning-card title="Contacts List with Account Lookup" icon-name="standard:contact">
        <c-custom-lookup-datatable
            key-field="Id"
            data={data}
            columns={columns}
            hide-checkbox-column
            draft-values={draftValues}
            onsave={handleSave}
            oncancel={handleCancel}            
            onaccountlookupclick={handleAccountLookupClick}>
    </c-custom-lookup-datatable>
    </lightning-card>

    <!-- Modal -->
    <template if:true={openModal}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <lightning-button-icon icon-name="utility:close" class="close-btn" onclick={handleCloseModal}></lightning-button-icon>
                    <h2 class="slds-text-heading_medium">Select Account</h2>
                </header>

                <div class="slds-modal__content slds-p-around_medium">
                    <lightning-input
                        label="Search Account"
                        value={searchKey}
                        onchange={handleSearchChange}>
                    </lightning-input>

                    <template if:true={accountResults.length}>
                        <ul class="account-list">
                            <template for:each={accountResults} for:item="acc">
                                <li key={acc.Id} class="account-item" data-id={acc.Id} data-name={acc.Name} onclick={handleSelectAccount}>
                                    <lightning-icon icon-name="standard:account" size="small"></lightning-icon>
                                    <span>{acc.Name}</span>
                                </li>
                            </template>
                        </ul>
                    </template>
                </div>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
</template>
